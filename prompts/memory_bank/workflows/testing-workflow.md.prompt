---
file: testing-workflow.md
target_path: .memory_bank/workflows/
priority: 25
dependencies: []
conditional: null
target_lines: 35
---

# Generation Instructions for workflows/testing-workflow.md

## Context

You are generating the testing workflow - a RULEBOOK defining the quality gate sequence for testing features through 4 stages.

**CRITICAL: This is a RULEBOOK (prescriptive), not a description**
- Use "Rule:" in title, numbered actions in Process
- Show exact 4-stage sequence AI must follow
- Keep concise: exact template for structure
- Reference Testing Guide for commands and patterns

This file serves as:
- **Execution rules** for testing progression
- **Quality gates**: Local Dev → Pre-PR → CI → Merge
- **Stage-by-stage steps** developers must complete

**Audience**: AI assistants, developers
**Tone**: Prescriptive, action-oriented, systematic
**Length**: 30-40 lines

## Input Data

```json
{
  "project_name": "string",
  "has_frontend": true|false,
  "has_backend": true|false,
  "backend_test_framework": "pytest|jest|...",
  "frontend_test_framework": "vitest|jest|...",
  "test_command": "string"
}
```

## Output Requirements

### Structure

Generate testing-workflow.md as a **RULEBOOK** (not a description). Use concrete rules, not explanations.

Follow the minerals format with these sections:

#### 1. Header & Goal

```markdown
# Rule: Testing Quality Gates

## Goal

To guide developers through 4 quality gates for testing features: Local Development → Pre-PR Validation → CI Checks → Merge Verification.

## Output

- **Stage 1**: Tests pass locally during development
- **Stage 2**: Full test suite + coverage pass before PR
- **Stage 3**: CI pipeline green (all checks pass)
- **Stage 4**: Merge gated on green CI
- **Reference**: [Testing Guide](../guides/testing.md) for commands and patterns
```

**Key elements**:
- Title starts with "Rule:"
- Goal: ONE sentence stating the 4-stage progression
- Output: Concrete specifications for each stage
- Reference to Testing Guide (don't duplicate)

#### 2. Process (NUMBERED STEPS - 4 Quality Gates)

```markdown
## Process

### Stage 1: Local Development Testing

1. **Run Relevant Tests**: While developing, run {test_command} for changed code
2. **Check Results**: Ensure tests pass before committing
   - See [Testing Guide](../guides/testing.md) for commands

### Stage 2: Pre-PR Quality Gate

3. **Run Full Test Suite**: Execute all tests (backend + frontend if applicable)
4. **Check Coverage**: Generate coverage report, ensure new code is tested
5. **Run Linter**: Fix all linting errors
6. **Run Build**: Ensure production build succeeds (type checks pass)
7. **Run E2E Smoke Tests**: Verify core workflows still work
   - See [Testing Guide](../guides/testing.md) for coverage and E2E commands

### Stage 3: CI Validation

8. **Create PR**: CI automatically runs full test suite
9. **Monitor CI**: Check that all CI checks pass (tests, linting, type checks, E2E)
10. **Requirement**: PR eligible for review only when CI is green

### Stage 4: Verification & Merge

11. **Code Review**: Complete after CI passes
12. **Merge**: Gated on green CI pipeline
```

**CRITICAL instructions for prompts**:
- NUMBERED list (1-12 across 4 stages)
- Each step is a concrete ACTION
- NO explanations, only actions
- Reference Testing Guide for commands, don't duplicate

#### 3. Related Documentation

List references to detailed guides:

```markdown
## 3. Related Documentation

- **[Testing Guide](../guides/testing.md)** (The SSOT for all commands, patterns, and principles)
- **[Code Review Workflow](./code-review-workflow.md)**
```

Conditional references:
- Include Backend Guide if has_backend
- Include Frontend Guide if has_frontend

### Style Guidelines

1. **Process-Focused**: Describe testing sequence, not test patterns
2. **4-Step Progression**: Local Dev → Pre-PR → CI → Merge
3. **Quality Gates**: Each step is a gate before next step
4. **Reference-First**: Link to Testing Guide for commands/patterns
5. **Concise**: 55-65 lines total, focused on workflow progression

### Anti-Patterns to Avoid

**CRITICAL: Do NOT include these in the generated workflow**:

1. ❌ **Descriptive Instead of Prescriptive**: NO "This document outlines..." or "The workflow describes..."
   - ✅ USE: "Rule:" title, numbered actions (1-12), 4 stages

2. ❌ **Embedded Test Patterns**: NO AAA pattern, test code examples, TDD workflow
   - ✅ USE: Reference [Testing Guide](../guides/testing.md)

3. ❌ **Explanations Instead of Rules**: NO "Purpose" section with explanations
   - ✅ USE: "Goal" (one sentence), "Process" (numbered steps)

4. ❌ **Section Bloat**: NO more than 3 sections
   - ✅ USE: Goal, Process, Related Documentation

5. ❌ **Long Examples**: NO 40+ line stage descriptions
   - ✅ USE: Concise numbered steps (30-40 lines total)

**Why**: Workflows are RULEBOOKS, not DESCRIPTIONS. Test patterns belong in Testing Guide.

**Reference Anti-Pattern #25**: Descriptive workflows instead of prescriptive rules (see anti-patterns.md)

### Quality Checklist

- [ ] Title starts with "Rule:" (rulebook format)
- [ ] Goal section: ONE sentence stating 4-stage progression
- [ ] Output section: Specifies outcome for each stage
- [ ] Process section: NUMBERED steps (1-12 across 4 stages)
- [ ] Stage 1: Local Development (steps 1-2)
- [ ] Stage 2: Pre-PR Quality Gate (steps 3-7)
- [ ] Stage 3: CI Validation (steps 8-10)
- [ ] Stage 4: Verification & Merge (steps 11-12)
- [ ] References Testing Guide (doesn't embed patterns)
- [ ] Related Documentation section present
- [ ] 3 sections total (Goal + Output, Process, Related Documentation)
- [ ] NO "Purpose" section (that's descriptive, not prescriptive)
- [ ] NO test code examples or AAA pattern
- [ ] NO debugging procedures or TDD workflow
- [ ] 30-40 lines target (concise rulebook)
- [ ] Prescriptive language: numbered actions, not explanations
- [ ] Includes Anti-Pattern #25 reference
- [ ] No {{PLACEHOLDERS}} remain
- [ ] Grammar perfect

## Common Mistakes to Avoid

1. ❌ **Descriptive title**: "Testing Workflow" → Use "Rule: Testing Quality Gates"
2. ❌ **"Purpose" section**: Explanatory → Use "Goal" (one sentence)
3. ❌ **Long stage descriptions**: 40+ lines per stage → Use numbered steps
4. ❌ **Missing "Rule:" title** → Must start with "Rule:"
5. ❌ **No numbered steps** → Process must be 1-12 numbered actions
6. ❌ **Embedded test patterns**: AAA, TDD → Reference Testing Guide
7. ❌ **Too long** (55-65 lines) → Target 30-40 lines
8. ❌ **Missing Anti-Pattern #25 reference** → Include in Anti-Patterns section
9. ❌ **No Output section** → Must specify outcome for each stage

## Validation

- [ ] Title: "Rule: Testing Quality Gates"
- [ ] Goal section: ONE sentence about 4-stage progression
- [ ] Output section: Specifies outcome for each stage
- [ ] Process section: 12 numbered steps across 4 stages
- [ ] Stage 1: Steps 1-2 (Local Development)
- [ ] Stage 2: Steps 3-7 (Pre-PR Quality Gate)
- [ ] Stage 3: Steps 8-10 (CI Validation)
- [ ] Stage 4: Steps 11-12 (Verification & Merge)
- [ ] Related Documentation section present
- [ ] References Testing Guide (doesn't duplicate)
- [ ] 3 sections total (NOT "Purpose" or long descriptions)
- [ ] Anti-Pattern #25 reference included
- [ ] 30-40 lines (NOT 55-65)
- [ ] Prescriptive language throughout
- [ ] No placeholders
- [ ] Grammar perfect
