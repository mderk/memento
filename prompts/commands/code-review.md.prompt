---
file: code-review.md
target_path: .claude/commands/
priority: 56
dependencies: ["code-reviewer.md"]
conditional: null
---

# Generation Instructions for commands/code-review.md

## Context

You are generating the /code-review slash command - a command that launches the code-reviewer agent on specified files.

This command serves as:
- **Agent launcher** - Invokes code-reviewer agent
- **File reviewer** - Reviews specified files
- **Quality orchestrator** - Delegates review to agent

**Audience**: Claude Code (executing the command)
**Tone**: Instructional, agent-focused
**Length**: 35-45 lines

## Input Data

```json
{
  "project_name": "string",
  "has_backend": true|false,
  "has_frontend": true|false,
  "backend_framework": "Django|FastAPI|Express|Flask|...",
  "frontend_framework": "React|Vue|Angular|Svelte|..."
}
```

## Output Requirements

### Structure

Generate code-review.md with these sections:

#### 1. YAML Frontmatter
```yaml
---
description: Run code-reviewer agent on specified files
---
```

#### 2. Command Purpose
```markdown
You are tasked with running a comprehensive code review on the files provided by the user.
```

#### 3. Instructions

**Step 1: Parse Files**
```markdown
## Instructions

1. **Parse the files argument**: The user will provide a space-separated list of file paths (relative to project root).
```

**Step 2: Launch Agent**
```markdown
2. **Launch the code-reviewer agent**: Use the Task tool with `subagent_type="code-reviewer"` to perform a comprehensive code review.
```

**Step 3: Provide Context**
```markdown
3. **Provide context**: In your prompt to the code-reviewer agent, include:
   - The list of files to review
   - Any specific concerns or context from the user's request
   - Request a thorough review covering:
     - Code quality and best practices
     - Security vulnerabilities (OWASP top 10, injection, XSS, etc.)
     - Performance considerations
     - Architecture and design patterns
{if has_backend && backend_framework}
     - {backend_framework} patterns and best practices
{endif}
{if has_frontend && frontend_framework}
     - {frontend_framework} patterns and best practices
     - Accessibility compliance (WCAG 2.1 AA)
{endif}
     - Error handling and type safety
```

**Step 4: Present Results**
```markdown
4. **Present results**: After the agent completes, summarize the findings for the user.
```

#### 4. Example Usage
```markdown
## Example Usage

```
{if has_backend}
/code-review server/path/to/file.py server/path/to/another.py
{endif}
{if has_frontend}
/code-review src/components/MyComponent.tsx
{endif}
{if !has_backend && !has_frontend}
/code-review path/to/file.ext
{endif}
```
```

#### 5. Important Notes
```markdown
## Important Notes

- The code-reviewer agent has access to the full codebase and can read additional files for context
- If no files are specified, ask the user which files they want reviewed
- Multiple files can be reviewed in a single run
```

### Conditional Logic

**If has_backend AND has_frontend:**
Include both backend and frontend specific review points

**If has_backend ONLY:**
Include backend review points, backend example

**If has_frontend ONLY:**
Include frontend review points, frontend example

**Framework-Specific Note:**
Simply include the framework name (e.g., "Django patterns", "React patterns") in review areas. The agent knows framework-specific best practices.

### Style Guidelines

1. **Concise**: Brief, focused instructions
2. **Agent-focused**: Emphasizes launching agent, not doing review directly
3. **Focused**: Lists key review areas without excessive detail
4. **Stack-aware**: Includes framework-specific considerations conditionally

### Quality Checklist

- [ ] YAML frontmatter with description
- [ ] Command purpose stated (brief, one sentence)
- [ ] 4 instruction steps numbered
- [ ] Parse files step
- [ ] Launch agent step with Task tool
- [ ] Context provision with focused review areas
- [ ] Stack-specific review points conditional
- [ ] Present results step
- [ ] Example usage section (1-2 examples)
- [ ] Example matches project stack
- [ ] Important notes section (3 items maximum)
- [ ] No {{PLACEHOLDERS}} remain
- [ ] 35-45 lines
- [ ] Grammar perfect

## Common Mistakes to Avoid

1. ❌ Not mentioning Task tool for launching agent
2. ❌ Too many specific review points (keep it focused, not exhaustive)
3. ❌ Example doesn't match project type
4. ❌ Too verbose (> 40 lines)
5. ❌ Including frontend points when has_frontend is false
6. ❌ Not emphasizing that agent handles detailed review

## Validation

- [ ] YAML frontmatter present
- [ ] Command purpose brief (1 sentence)
- [ ] Instructions numbered 1-4
- [ ] Task tool mentioned for agent launch
- [ ] Review points focused (not exhaustive list)
- [ ] Stack-specific points conditional
- [ ] Example matches stack
- [ ] Important notes present
- [ ] 30-40 lines
- [ ] No placeholders
- [ ] Grammar perfect
